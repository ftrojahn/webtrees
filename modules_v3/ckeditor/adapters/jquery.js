(function(){CKEDITOR.config.jqueryOverrideVal="undefined"==typeof CKEDITOR.config.jqueryOverrideVal?!0:CKEDITOR.config.jqueryOverrideVal;var a=window.jQuery;"undefined"!=typeof a&&(a.extend(a.fn,{ckeditorGet:function(){var b=this.eq(0).data("ckeditorInstance");if(!b){throw"CKEditor not yet initialized, use ckeditor() with callback."}return b},ckeditor:function(f,c){if(!CKEDITOR.env.isCompatible){return this}if(!a.isFunction(f)){var e=c;c=f;f=e}c=c||{};this.filter("textarea, div, p").each(function(){var b=a(this),j=b.data("ckeditorInstance"),d=b.data("_ckeditorInstanceLock"),i=this;if(j&&!d){f&&f.apply(j,[this])}else{if(d){CKEDITOR.on("instanceReady",function(g){var h=g.editor;setTimeout(function(){h.element?h.element.$==i&&f&&f.apply(h,[i]):setTimeout(arguments.callee,100)},0)},null,null,9999)}else{if(c.autoUpdateElement||"undefined"==typeof c.autoUpdateElement&&CKEDITOR.config.autoUpdateElement){c.autoUpdateElementJquery=!0}c.autoUpdateElement=!1;b.data("_ckeditorInstanceLock",!0);j=CKEDITOR.replace(i,c);b.data("ckeditorInstance",j);j.on("instanceReady",function(g){var h=g.editor;setTimeout(function(){if(h.element){g.removeListener("instanceReady",this.callee);h.on("dataReady",function(){b.trigger("setData.ckeditor",[h])});h.on("getData",function(l){b.trigger("getData.ckeditor",[h,l.data])},999);h.on("destroy",function(){b.trigger("destroy.ckeditor",[h])});if(h.config.autoUpdateElementJquery&&b.is("textarea")&&b.parents("form").length){var k=function(){b.ckeditor(function(){h.updateElement()})};b.parents("form").submit(k);b.parents("form").bind("form-pre-serialize",k);b.bind("destroy.ckeditor",function(){b.parents("form").unbind("submit",k);b.parents("form").unbind("form-pre-serialize",k)})}h.on("destroy",function(){b.data("ckeditorInstance",null)});b.data("_ckeditorInstanceLock",null);b.trigger("instanceReady.ckeditor",[h]);f&&f.apply(h,[i])}else{setTimeout(arguments.callee,100)}},0)},null,null,9999)}}});return this}}),CKEDITOR.config.jqueryOverrideVal&&(a.fn.val=CKEDITOR.tools.override(a.fn.val,function(b){return function(c,f){var d="undefined"!=typeof c,g;this.each(function(){var e=a(this),i=e.data("ckeditorInstance");if(!f&&e.is("textarea")&&i){if(d){i.setData(c)}else{return g=i.getData(),null}}else{if(d){b.call(e,c)}else{return g=b.call(e),null}}return !0});return d?this:g}})))})();