(function(){var a=/\[\[[^\]]+\]\]/g;CKEDITOR.plugins.add("placeholder",{requires:["dialog"],lang:"bg cs cy da de el en eo et fa fi fr he hr it nb nl no pl pt-br tr ug uk vi zh-cn".split(" "),init:function(d){var c=d.lang.placeholder;d.addCommand("createplaceholder",new CKEDITOR.dialogCommand("createplaceholder"));d.addCommand("editplaceholder",new CKEDITOR.dialogCommand("editplaceholder"));d.ui.addButton("CreatePlaceholder",{label:c.toolbar,command:"createplaceholder",icon:this.path+"placeholder.gif"});d.addMenuItems&&(d.addMenuGroup("placeholder",20),d.addMenuItems({editplaceholder:{label:c.edit,command:"editplaceholder",group:"placeholder",order:1,icon:this.path+"placeholder.gif"}}),d.contextMenu&&d.contextMenu.addListener(function(b){return !b||!b.data("cke-placeholder")?null:{editplaceholder:CKEDITOR.TRISTATE_OFF}}));d.on("doubleclick",function(e){CKEDITOR.plugins.placeholder.getSelectedPlaceHoder(d)&&(e.data.dialog="editplaceholder")});d.addCss(".cke_placeholder{background-color: #ffff00;"+(CKEDITOR.env.gecko?"cursor: default;":"")+"}");d.on("contentDom",function(){d.document.getBody().on("resizestart",function(e){d.getSelection().getSelectedElement().data("cke-placeholder")&&e.data.preventDefault()})});CKEDITOR.dialog.add("createplaceholder",this.path+"dialogs/placeholder.js");CKEDITOR.dialog.add("editplaceholder",this.path+"dialogs/placeholder.js")},afterInit:function(b){var f=b.dataProcessor,d=f&&f.dataFilter,f=f&&f.htmlFilter;d&&d.addRules({text:function(c){return c.replace(a,function(e){return CKEDITOR.plugins.placeholder.createPlaceholder(b,null,e,1)})}});f&&f.addRules({elements:{span:function(c){c.attributes&&c.attributes["data-cke-placeholder"]&&delete c.name}}})}})})();CKEDITOR.plugins.placeholder={createPlaceholder:function(f,g,j,h){var i=new CKEDITOR.dom.element("span",f.document);i.setAttributes({contentEditable:"false","data-cke-placeholder":1,"class":"cke_placeholder"});j&&i.setText(j);if(h){return i.getOuterHtml()}g?CKEDITOR.env.ie?(i.insertAfter(g),setTimeout(function(){g.remove();i.focus()},10)):i.replace(g):f.insertElement(i);return null},getSelectedPlaceHoder:function(a){a=a.getSelection().getRanges()[0];a.shrink(CKEDITOR.SHRINK_TEXT);for(a=a.startContainer;a&&!(a.type==CKEDITOR.NODE_ELEMENT&&a.data("cke-placeholder"));){a=a.getParent()}return a}};