CKEDITOR.dialog.add("checkspell",function(t){function r(f,a){var d=0;return function(){if("function"==typeof window.doSpell){"undefined"!=typeof o&&window.clearInterval(o);var e=new window._SP_FCK_LangCompare,c=CKEDITOR.getUrl(t.plugins.wsc.path+"dialogs/"),b=c+"tmpFrameset.html";window.gFCKPluginName="wsc";e.setDefaulLangCode(t.config.defaultLanguage);window.doSpell({ctrl:l,lang:t.config.wsc_lang||e.getSPLangCode(t.langCode),intLang:t.config.wsc_uiLang||e.getSPLangCode(t.langCode),winType:q,onCancel:function(){f.hide()},onFinish:function(j){t.focus();f.getParentEditor().setData(j.value);f.hide()},staticFrame:b,framesetPath:b,iframePath:c+"ciframe.html",schemaURI:c+"wsc.css",userDictionaryName:t.config.wsc_userDictionaryName,customDictionaryName:t.config.wsc_customDictionaryIds&&t.config.wsc_customDictionaryIds.split(","),domainName:t.config.wsc_domainName});CKEDITOR.document.getById(i).setStyle("display","none");CKEDITOR.document.getById(q).setStyle("display","block")}else{180==d++&&window._cancelOnError(a)}}}var s=CKEDITOR.tools.getNextNumber(),q="cke_frame_"+s,l="cke_data_"+s,i="cke_error_"+s,o,s=document.location.protocol||"http:",p=t.lang.spellCheck.notAvailable,h='<textarea style="display: none" id="'+l+'" rows="10" cols="40"> </textarea><div id="'+i+'" style="display:none;color:red;font-size:16px;font-weight:bold;padding-top:160px;text-align:center;z-index:11;"></div><iframe src="" style="width:100%;background-color:#f1f1e3;" frameborder="0" name="'+q+'" id="'+q+'" allowtransparency="1"></iframe>',g=t.config.wsc_customLoaderScript||s+"//loader.webspellchecker.net/sproxy_fck/sproxy.php?plugin=fck2&customerid="+t.config.wsc_customerId+"&cmd=script&doc=wsc&schema=22";t.config.wsc_customLoaderScript&&(p+='<p style="color:#000;font-size:11px;font-weight: normal;text-align:center;padding-top:10px">'+t.lang.spellCheck.errorLoading.replace(/%s/g,t.config.wsc_customLoaderScript)+"</p>");window._cancelOnError=function(d){if("undefined"==typeof window.WSC_Error){CKEDITOR.document.getById(q).setStyle("display","none");var a=CKEDITOR.document.getById(i);a.setStyle("display","block");a.setHtml(d||t.lang.spellCheck.notAvailable)}};return{title:t.config.wsc_dialogTitle||t.lang.spellCheck.title,minWidth:485,minHeight:380,buttons:[CKEDITOR.dialog.cancelButton],onShow:function(){var a=this.getContentElement("general","content").getElement();a.setHtml(h);a.getChild(2).setStyle("height",this._.contentSize.height+"px");"function"!=typeof window.doSpell&&CKEDITOR.document.getHead().append(CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",src:g}}));a=t.getData();CKEDITOR.document.getById(l).setValue(a);o=window.setInterval(r(this,p),250)},onHide:function(){window.ooo=void 0;window.int_framsetLoaded=void 0;window.framesetLoaded=void 0;window.is_window_opened=!1},contents:[{id:"general",label:t.config.wsc_dialogTitle||t.lang.spellCheck.title,padding:0,elements:[{type:"html",id:"content",html:""}]}]}});CKEDITOR.dialog.on("resize",function(b){b=b.data;var d=b.dialog;"checkspell"==d._.name&&((d=(d=d.getContentElement("general","content").getElement())&&d.getChild(2))&&d.setSize("height",b.height),d&&d.setSize("width",b.width))});